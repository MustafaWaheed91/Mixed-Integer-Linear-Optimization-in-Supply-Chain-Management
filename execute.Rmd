---
title: "Optimization in Supply Chain Management"
runtime: shiny
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    # logo: 
    vertical_layout: fill
    social: menu
    source_code: embed
    theme: simplex
    css: www/css/custom.css

---




```{r setup, global, include=FALSE}
rm(list = ls())
library(shiny)
library(magrittr)
library(leaflet) # devtools::install_github('rstudio/leaflet')
library(highcharter) # devtools::install_github('jbkunst/highcharter')
library(plotly) # devtools::install_github('ropensci/plotly')
library(ggplot2) # devtools::install_github('hadley/ggplot2')
library(sp)
library(dplyr)
library(flexdashboard) # devtools::install_github('rstudio/flexdashboard')
library(rgeos)
library(mapproj)
library(maptools)
library(readr)
library(ggthemes)
library(viridis)
library(formattable)
library(ggrepel)
library(ompr)
library(ompr.roi)
library(ROI.plugin.glpk)

source(file = "helper.R")



```

Sidebar {.sidebar}
======================================================================
</br>
```{r}
strong("Application Parameters")
hr()
br()
numericInput(inputId = "grid_size", "Enter the Gird Size", value = 1000)
sliderInput(inputId = "warehouse_num", label = "Select the Number of Warehouses:", min = 10, max = 30, value = 20)
sliderInput(inputId = "customer_num", label = "Select the Number of Customers:", min = 50, max = 150, value = 100)
br()
actionButton(inputId = "solve_it", label = "  Solve  ")
hr()
```

</br>
</br>
<strong>Author: Mustafa Waheed</strong>  
[LinkedIn Profile](https://www.linkedin.com/in/mustafa-waheed-5b78552b/)   
[Github Profile](https://github.com/MustafaWaheed91)  
[Kaggle Profile](https://www.kaggle.com/mustafawaheed91)  
</br>
</br>


<!-- {data-navmenu="Warehouse Location"} -->
Warehouse Location
======================================================================

Row {data-width=1000}
-----------------------------------------------------------------------
### Grid Map of Customers and Warehouses
```{r}
renderPlotly({
  input$solve_it 
  if(input$solve_it == 0){
    return(ggplotly(PlotSetup(n = input$customer_num, m = input$warehouse_num, grid_size = input$grid_size)))
  } else {
    isolate({
      return(ggplotly(SolvedPlot(n = input$customer_num, m = input$warehouse_num, grid_size = input$grid_size)))
    })
    
  }
})

```


Row
-----------------------------------------------------------------------
### Problem Background

<h4>The Warehouse Location Problem: </h4>

Given a set of customers and set of locations to build warehoses the task is to decide where to build warehouses and from what warehouses goods should be shipped to which customer.

The Two Decisions (Variable) we need to make at the same time are  
  - Where and If to build warehouses  
  - Which customer to assign to warehouses  


<strong>The Mathematical Model</strong>  

$$ Minimize  { \sum\limits_{i=1}^{n}\sum\limits_{j=1}^{m} } {TransportCost_i}{_j} * {x_i}{_j} + \sum\limits_{i=1}^{n} FixedCost_j * y_j  $$  

Subject to: 
$$ \sum\limits_{j=1}^{m} x_i{_j} {= 1} \     \  \forall  \       \   i = \{1,....,n\}$$
$$ x_i{_j} \  \ {  \leq  } \  \ y_j   \     \ { \forall}  \       \   {i = \{1,....,n\}} \  \ {j = \{1,....,m\}}$$
$$ x_i{_j} \  \ {  \in  } \  \  \{0,1\} \    \  {i = \{1,....,n\}} \  \ {j = \{1,....,m\}} \ $$
$$ y{_j} \  \ {  \in  } \  \  \{0,1\}   \      \   {j = \{1,....,m\}}$$  




<!-- The warehouses are also randomly placed on the grid.   -->

<!-- ```{r} -->


<!-- ``` -->

<!-- ### Customer Data  -->

<!-- We assume the customers are located in a grid with euclidian distances:   -->

<!-- ```{r} -->

<!-- ``` -->



<!-- About {data-navmenu="Warehouse Location"} -->
<!-- ============================================================================ -->
